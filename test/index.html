<h2>Pizza Orders</h2>
<div id="orderList"></div>

<script>
    const API_BASE = "https://crudbackend-production-6bb6.up.railway.app";

    // READ Logic
    async function loadPizzas() {
        const res = await fetch(`${API_BASE}/pizzas`);
        const data = await res.json();
        const list = document.getElementById('orderList');
        list.innerHTML = data.map(p => `
            <div>
                <strong>Order #${p.id}</strong>: ${p.size} ${p.crust} (${p.order_type}) 
                <br> Toppings: ${p.topping_names || 'None'}
                <button onclick="confirmDelete(${p.id})">Delete</button>
                <hr>
            </div>
        `).join('');
    }

    // DELETE Logic with Confirmation
    async function confirmDelete(id) {
        if(confirm("Are you sure you want to delete order #" + id + "?")) {
            const res = await fetch(`${API_BASE}/delete-pizza/${id}`, { method: 'DELETE' });
            const result = await res.json();
            alert(result.message);
            loadPizzas(); // Refresh list
        }
    }

    loadPizzas();
</script>